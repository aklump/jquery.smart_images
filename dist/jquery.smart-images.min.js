/**
 * Smart Images jQuery Plugin v0.4.1
 * http://www.intheloftstudios.com/packages/js/jquery.smart_images
 *
 * Window width based image loading for responsive applications.
 *
 * Copyright 2017-2018,
 * @license BSD-3-Clause
 *
 * Date: Fri Dec 14 17:06:09 PST 2018
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery","@aklump/breakpointx"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i,require("@aklump/breakpointx")),i}:t(jQuery,BreakpointX)}(function(t,e){function i(e,i){this.settings=t.extend({},t.fn.smartImages.defaults,i),this.$el=t(e),this.$img=this.$el.find(this.settings.imgSelector),this.init()}i.prototype.init=function(){this.srcMap={},this.loaded=[],this.srcWidth=null;var i=this,a=this.$el,n=this.settings,s=n.srcSelector||"[data-"+n.dataPrefix+n.dataMediaSuffix+"]",r=a.find(s);if(0===r.length)throw new Error("No elements found matching: "+s);var o=this.settings.dataPrefix;if(this.breakpointX=new e({resizeThrottle:n.resizeThrottle}),this.$el.data("breakpointX",this.breakpointX),i.srcMap={},r.hide().each(function(){var e=t(this).attr("data-"+n.dataPrefix+n.dataMediaSuffix)||"";i.breakpointX.addSegmentByMedia(e);var a=t(this).attr("data-"+o+n.dataSrcSuffix);i.srcMap[e]=a}),this.breakpointX.addCrossAction(function(t,e){var a=i.loaded.length?Math.max.apply(Math,i.loaded):null,s=t.imageWidth,r=null===a;if("bigger"===e&&(s>a||s>i.srcWidth))r=!0;else if("smaller"===e)switch(r=!0,n.downsize){case"never":r=!1;break;case"loaded":r=i.loaded.indexOf(t.imageWidth)>=0}r&&i.changeHandler(t)}),this.settings.onInit){var d=this.breakpointX.getSegment(n.initialWidth);this.settings.onInit.call(this,d)}this.breakpointX.triggerActions(n.initialWidth)},i.prototype.changeHandler=function(t){t=t||this.breakpointX.getSegmentByWindow();var e=this,i=e.srcMap[t.name]||"",a=e.settings.onBeforeChange&&e.settings.onBeforeChange.call(e,t,i)===!1;if(!a){var n=e.settings.dataPrefix+"has-not-src";e.$img.attr("src",i),e.srcWidth=i?t.imageWidth:null,i&&e.loaded.push(t.imageWidth),i?e.$el.removeClass(n):e.$el.addClass(n),e.settings.onAfterChange&&e.settings.onAfterChange.call(e,t,i)}},i.prototype.destroy=function(){this.$el.removeData("smartImages"),this.$el.removeData("breakpointX")},t.fn.smartImages=function(e,a){return this.each(function(){var n=t.data(this,"smartImages");n&&"string"==typeof e&&"function"==typeof n[e]?n[e](a):t.data(this,"smartImages",new i(this,e))})},t.fn.smartImages.defaults={dataPrefix:"si-",dataSrcSuffix:"srcset",dataMediaSuffix:"media",imgSelector:"img",srcSelector:null,resizeThrottle:200,downsize:"never",onInit:null,onBeforeChange:null,onAfterChange:null,initialWidth:null},t.fn.smartImages.version=function(){return"0.4.1"}});