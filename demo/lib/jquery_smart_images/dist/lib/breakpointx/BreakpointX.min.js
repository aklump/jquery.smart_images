/**
 * BreakpointX ("Crossing") JavaScript Module v0.4
 * 
 *
 * Define responsive breakpoints, register callbacks when crossing, with optional css class handling.
 *
 * Copyright 2015-2017, Aaron Klump <sourcecode@intheloftstudios.com>
 * @license Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: Thu Mar 30 10:43:55 PDT 2017
 */
var BreakpointX=function($,t){function i(t,i){return declaration=i?"min":"max",declaration+"-width: "+t+"px"}function s(t,i){this.version="0.4",this.settings=$.extend({},this.options,i),this.settings.breakpoints=t,this.current=null,this.last={},this.actions={},this.breakpoints={},this.aliases=[],this.init(t)}return s.prototype.options={addClassesTo:null,classPrefix:"bpx-",resizeThrottle:200},s.prototype.init=function(s){var a=this,n,e={};if(s instanceof Array){var r,o;for(n in s){o=1*n+1,r=s[n];var l=!0;void 0!==s[o]&&(l=!1,r=1*s[o]-1);e[i(r,l)]=s[n]}s=e}if("object"!=typeof s)throw"Object needs format {alias: minWidth}.";a.aliases=[];var h=[],d,u,c,p;for(d in s)u=parseInt(s[d],10),h.push([d,u]);h.sort(function(t,i){return t[1]-i[1]});for(n in h)n*=1,c=h[n][1],d=h[n][0],a.aliases.push(d),p=void 0===h[n+1]?null:h[n+1][1]-1,a.breakpoints[d]=[c,p];if(a.reset(),this.settings.addClassesTo&&a.add("both",this.aliases,this.cssHandler),a.actions.hasOwnProperty("bigger")||a.actions.hasOwnProperty("smaller")||a.actions.hasOwnProperty("both")){var f=a.getWindowWidth();a.callbacksHandler(f,!0);var v=a.settings.resizeThrottle,b=null;$(t).resize(function(){clearTimeout(b),b=setTimeout(function(){f=a.getWindowWidth(),a.callbacksHandler(f)},v)})}return a},s.prototype.getWindowWidth=function(){var i,s=t,a="inner";return"innerWidth"in t||(a="client",s=document.documentElement||document.body),i=s[a+"Width"]},s.prototype.cssHandler=function(t,i,s){var a=this.settings.addClassesTo instanceof jQuery?this.settings.addClassesTo:$(this.settings.addClassesTo),n=this.settings.classPrefix;a.removeClass(n+"smaller").removeClass(n+"bigger").removeClass(n+t.name).addClass(n+i.name),s&&a.addClass(n+s)},s.prototype.callbacksHandler=function(t,i){var s=this,a=s.alias(t),n=a!==s.last.alias;if(n||i){var e=n?t>s.last.width[0]?"bigger":"smaller":null,r="smaller"===e?s.last.alias:a,o=[s.actions.both];e&&o.push(s.actions[e]);for(var l in o){var h={minWidth:s.breakpoints[s.last.alias][0],maxWidth:s.breakpoints[s.last.alias][1],name:s.last.alias},d={minWidth:s.breakpoints[a][0],maxWidth:s.breakpoints[a][1],name:a};for(var u in o[l][r])o[l][r][u].call(s,h,d,e)}s.last={width:s.value(a),alias:a,direction:e},s.current=a}},s.prototype.reset=function(){return this.actions={bigger:[],smaller:[],both:[]},this.last={width:null,alias:null,direction:null},this.last.alias=this.alias(t.innerWidth),this.last.width=this.value(this.last.alias),this.current=this.last.alias,this},s.prototype.alias=function(t){if("first"===t)return this.aliases[0];if("last"===t)return this.aliases[this.aliases.length-1];var i;for(var s in this.breakpoints){var a=this.breakpoints[s][0];if(i=i||s,t<a)return i;i=s}return i},s.prototype.value=function(t){return void 0===this.breakpoints[t]?null:this.breakpoints[t]},s.prototype.query=function(t){var s=t===this.alias("last"),a=this.value(t);return a=s?a[0]:a[1],i(a,s)},s.prototype.add=function(t,i,s){var a=this;if(void 0===a.actions[t])throw"Bad direction: "+t;if(0===i.length)throw"Breakpoints must be an array of aliases.";if("function"!=typeof s)throw"Callback must be a function";for(var n in i){var e=i[n];if(a.aliases.indexOf(e)===-1)throw'Unknown alias: "'+e+'"';a.actions[t][e]=a.actions[t][e]||[],a.actions[t][e].push(s)}return this},s}(jQuery,window);