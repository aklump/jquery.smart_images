<!DOCTYPE html>
<html>
<head>
  <title>Demo of Smart Images</title>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="lib/jquery_smart_images/dist/lib/breakpointx/dist/BreakpointX.js"></script>
  <script src="lib/jquery_smart_images/dist/jquery.smart_images.js"></script>
  <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <style type="text/css">
    img {
      max-width: 100%;
      height: auto;
    }
  </style>
  <script>
    (function ($) {
      $('document').ready(function () {
        $('.always').smartImages({
          downsize      : 'always',
          onInit        : function () {
            console.log('onInit called');
          },
          onBeforeChange: function (bp, src) {
            console.log('onBeforeChange called', bp, src);
          },
          onAfterChange : function (bp, src) {
            console.log('onAfterChange called', bp, src);
          }
        });
        $('.never').smartImages({
          downsize: 'never'
        });
        $('.loaded').smartImages({
          downsize: 'loaded'
        });
      });
    })(jQuery);
  </script>
</head>
<body>
<div class="container">
  <h1><!--$web_package_name--><!--/$web_package_name--> Demo
    <small>Smart Images</small>
  </h1>
  <p class="lead"><!--$web_package_description--><!--/$web_package_description--></p>

  <!-- Key features of Smart Images -->
  <div class="well">
    <ul>
      <li>Window width based image loading for responsive applications.</li>
    </ul>
  </div>

  <p>
    <a href="http://www.intheloftstudios.com/packages/jquery/jquery.smart_images" type="button" class="btn btn-primary"
       data-web-package="homepage">Homepage</a>
    <a href="https://github.com/aklump/jquery.smart_images" type="button"
       class="btn btn-primary btn-success">Download</a>
  </p>

  <h2>Demo Instructions</h2>
  <ol>
    <li>Change your browser window width and observe how the <code>img.src</code> changes and pulls in the image appropriate to the window width.</li>
  </ol>
  <hr/>

  <h2>Example</h2>
  <p>The image below does not use the above markup, but a variant with more breakpoints. Inspect source to learn
    more. It is split into three slices to demonstrate the various downsize settings (always, never, loaded), in that
    order.</p>
  <div class="always">
    <span data-si-srcset="images/319/1-always.jpg" data-si-media="(max-width: 319px)"></span>
    <span data-si-srcset="images/479/1-always.jpg" data-si-media="(max-width: 479px)"></span>
    <span data-si-srcset="images/767/1-always.jpg" data-si-media="(max-width: 767px)"></span>
    <span data-si-srcset="images/1080/1-always.jpg" data-si-media="(min-width: 768px)"></span>
    <img/>
  </div>
  <div class="never">
    <span data-si-srcset="images/319/2-never.jpg" data-si-media="(max-width: 319px)"></span>
    <span data-si-srcset="images/479/2-never.jpg" data-si-media="(max-width: 479px)"></span>
    <span data-si-srcset="images/767/2-never.jpg" data-si-media="(max-width: 767px)"></span>
    <span data-si-srcset="images/1080/2-never.jpg" data-si-media="(min-width: 768px)"></span>
    <img/>
  </div>
  <div class="loaded">
    <span data-si-srcset="images/319/3-loaded.jpg" data-si-media="(max-width: 319px)"></span>
    <span data-si-srcset="images/479/3-loaded.jpg" data-si-media="(max-width: 479px)"></span>
    <span data-si-srcset="images/767/3-loaded.jpg" data-si-media="(max-width: 767px)"></span>
    <span data-si-srcset="images/1080/3-loaded.jpg" data-si-media="(min-width: 768px)"></span>
    <img/>
  </div>

  <h2>Theory/Concept</h2>
  <p>For simplicity let's divide the horizontal plane in half, with a single breakpoint at 768px. In media queries we
    would write the following:</p>

  <pre>
    // this targets "mobile"
    h1 {
      font-size: 12px;
    }

    // this targets "desktop"
    @media only screen and (min-width: 768px) {
      h1 {
        font-size: 18px;
      }
    }
  </pre>

  <p>We can talk about this in terms of two ranges of x values:</p>
  <ol>
    <li>0 - 767px</li>
    <li>768+</li>
  </ol>

  <p>Since we are talking about responsive images, and following the above layout, we need two (2) versions of the image:</p>
  <ol>
    <li>The first image needs to be 767px wide; to be displayed in our "mobile" context we just defined.</li>
    <li>The last image needs to have a sensible width that is greater than 768px.  The size depends on your application, but might--for a standard website--be 1366px or 1080px, say.</li>
  </ol>

  With that in mind, let's move on to the markup.

  <h2>Markup</h2>

  <ul>
    <li>You MUST have at least two image paths defined based on a media query regarding a screen width.</li>
    <li>You MUST have only one <code>min-width</code> declaration and it needs to be 1px greater than your highest
      <code>max-width</code> declaration.
    </li>
    <li>You MAY have as many <code>max-width</code> declarations as you want breakpoints.</li>
    <li>Each <code>max-width</code> tag MUST define a path to an image the SHOULD be the same width as the <code>max-width</code>
      value.
    <li>The single <code>min-width</code> tag MUST define a path to the largest image you want to load and it SHOULD be
      larger than the <code>min-width</code> value, e.g., if <code>min-width=769</code> the image may be 1080px wide.
    </li>
    </li>
  </ul>

  <pre>
    &lt;div class="smart-image">
      &lt;span data-si-srcset="images/767/water-buffalo.jpg" data-si-media="(max-width: 767px)">&lt;/span>
      &lt;span data-si-srcset="images/1080/water-buffalo.jpg" data-si-media="(min-width: 768px)">&lt;/span>
      &lt;img/>
    &lt;/div>
</pre>

  <h3>The Last, The Anomoly</h3>
  <h4>The relationship between `media` and `srcset`</h4>
  <p>To prove a point I'm going to redefine with 4 breakpoints and then point something out.</p>

  <pre>
    &lt;div class="smart-image">
      &lt;span data-si-srcset="images/319/water-buffalo.jpg" data-si-media="(max-width: 319px)">&lt;/span>
      &lt;span data-si-srcset="images/479/water-buffalo.jpg" data-si-media="(max-width: 479px)">&lt;/span>
      &lt;span data-si-srcset="images/767/water-buffalo.jpg" data-si-media="(max-width: 767px)">&lt;/span>
      &lt;span data-si-srcset="images/1080/water-buffalo.jpg" data-si-media="(min-width: 768px)">&lt;/span>
      &lt;img/>
    &lt;/div>
</pre>

  <strong>Except for the last and widest breakpoint, the image width MUST match the `(max-width:...` in the `data-si-media` declaration.  The last will NEVER match; the `data-si-srcset` will always be somewhat larger than the `data-si-media`.</strong>

  <h2>Javascript</h2>
  <pre>
    $('document').ready(function () {
      $('.smart-image').smartImages();
    });
  </pre>

  <h2>Configuration</h2>
  <p>See the source for configuration options, including alternative selector classes, and data attributes.</p>




  <hr/>
  <p class="text-muted"><strong>jquery.smart_images</strong> is brought to you by <a
      href="http://www.intheloftstudios.com">In the Loft Studios</a></p>
</div>

<!-- Form me icon/link -->
<a href="https://github.com/aklump/jquery.smart_images"><img style="position: absolute; top: 0; right: 0; border: 0;"
                                                             src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"
                                                             alt="Fork me on GitHub"></a>
</body>
</html>
